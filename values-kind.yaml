replicaCount: 3

image:
  repository: emqx/emqx
  tag: 5.7.2
  pullPolicy: IfNotPresent

# Service for external access
service:
  type: NodePort
  mqtt: 1883
  dashboard: 18083
  nodePorts:
    mqtt: 30183
    dashboard: 31803

# EMQX clustering config
emqxConfig:
  EMQX_CLUSTER__DISCOVERY: "dns"
  EMQX_CLUSTER__DNS__NAME: "my-emqx-headless.default.svc.cluster.local"

# Persistence (disable for KIND)
persistence:
  enabled: false

# Resource requests/limits
resources:
  limits:
    cpu: 500m
    memory: 512Mi
  requests:
    cpu: 200m
    memory: 256Mi

# Horizontal Pod Autoscaler
autoscaling:
  enabled: true
  minReplicas: 3      # Minimum pods
  maxReplicas: 5      # Maximum pods
  targetCPUUtilizationPercentage: 50  # Scale up if CPU >50%
  targetMemoryUtilizationPercentage: 50 # Optional, scale based on memory

# Node selector, tolerations, affinity can be added if needed
nodeSelector: {}
tolerations: []
affinity: {}

# Extra options for scaling and service discovery
podManagementPolicy: Parallel
recreatePods: true
